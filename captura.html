<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Captura</title>
    <!--Let browser know website is optimized for mobile-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <link href="https://fonts.googleapis.com/css?family=Raleway|Roboto" rel="stylesheet">
    <!--  Materialize Scripts-->
    <!--  SweetAleert2-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.9.1/sweetalert2.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.9.1/sweetalert2.min.css">
    <!-- Include a polyfill for ES6 Promises (optional) for IE11 and Android browser -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>
    <!-- First, include the Webcam.js JavaScript Library -->
    <script type="text/javascript" src="webcam.js"></script>
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
    <script src="js/init.js"></script>
    <script async defer src="https://buttons.github.io/buttons.js"></script>
  </head>
  <body>
  <div class="navbar-fixed">
    <nav class="white" role="navigation">
      <div class="nav-wrapper container">
        <ul id="slide-out" class="side-nav">
          <li><a href=".">Home</a></li>
          <li><a href="captura.html">Captura</a></li>
          <li><a href="reconocimiento.html">Reconocimiento Facial</a></li>
        </ul>
        <a href="#" data-activates="slide-out" class="button-collapse show-on-large"><i class="material-icons">menu</i></a>
        <a id="logo-container" href="." class="brand-logo">RF</a>
        <ul class="right hide-on-med-and-down">
          <li class="active"><a href="captura.html">Captura</a></li>
          <li><a href="reconocimiento.html">Reconocimiento</a></li>
        </ul>
        <ul id="nav-mobile" class="side-nav">
          <li class="active"><a href="captura.html">Captura</a></li>
          <li><a href="reconocimiento.html">Reconocimiento</a></li>
        </ul>
      </div>
    </nav>
    </div>
    <section>
      <!--<div class="container">
        <div class="carousel carousel-slider center" data-indicators="true">
          <div class="carousel-fixed-item center">
            <a href="#tcmodal" class="btn waves-effect white grey-text darken-text-2 tctrigger">Más información</a>
          </div>
          <div class="carousel-item white-text" href="#" style="background-image: url(https://listen.statestreet.com/content/dam/ssblog/inline/face.gif);background-size: 100% 100%;
          height:100%;width:100%;margin: auto;position: absolute;top:0;bottom:0;left:0;right:0;">
            <h2>Autenticación mixta</h2>
              <p class="white-text">Usando la combinación de metodos biometricos faciales y de voz, esposible aumentar el grado de seguridad con la autenticación mixta</p>
          </div>
          <div class="carousel-item white-text" href="#" style="background-image: url(https://s3.amazonaws.com/kairos-media/Kairos-Face-Recognition-Header.jpg);background-size:100%100%;
          height:100%;width:100%;margin: auto;position: absolute;top:0;bottom:0;left:0;right:0;">
            <h2>Biometria facial</h2>
              <p class="white-text">Sonrié y listo, basta con tomar una foto para que ingreses a la plataforma</p>
          </div>
          <div class="carousel-item white-text" href="#" style="background-image: url(http://www.dataversity.net/wp-content/uploads/2015/09/Voice-Processing.jpg?x23053);background-size:100%100%;height:100%;width:100%;margin: auto;position: absolute;top:0;bottom:0;left:0;right:0;">
              <h2>Biometria vocal</h2>
              <p class="white-text">"Mi voz es mi contraseña" es la frase que dirás siempre que quieras autenticante sin necesidad de contraseñas</p>
          </div>
        </div>
       </div>
      <script type="text/javascript">
          $(document).ready(function(){
            $('.carousel.carousel-slider').carousel({full_width: true});
          });
      </script>-->
      <div id="carga" class="progress" style="display:none">
        <div  class="indeterminate"></div>
      </div>
    <section class="aboutContent">
      <div class="container">
        <h1 class="responsive center">Registro</h1>
        <p>A continuación podrá registrar su huella facial con solo tomar una foto, para lograr esto es necesario que se habilite la camara y cuente con buen iluminación, recuerde no mover la cabeza a la hora de presionar el botón registrar y mantenga la cara de frente hacia la camara.</p>
      </div>
    </section>
    <section class="inquiry">
      <div class="container row">
        <form id="myform" name="Form" method="post" action="saveawsimage.php">
          <div class="row ">
            <div class="col s12 m12 l6">
              <div id="my_camera" class="responsive-video">
                <script language="JavaScript">
                  Webcam.set({
                    width: 300,
                    height: 230,
                    dest_width: 600,
                    dest_height: 460,
                    image_format: 'jpeg',
                    jpeg_quality: 100
                  });
                  Webcam.attach( '#my_camera' );
                </script>
              </div>
            </div>
            <div class="input-field col s12 m12 l6">
              <input name="nombre_img" id="email" type="email" required onkeydown="if (event.keyCode == 13) return false" />
              <label for="email">Email</label>
            </div>
            <div class="col s12 m12 l6">
              <button class="btn red waves-effect waves-light" type="button"  onClick="take_snapshot1()">Registrar
                <i class="material-icons right">add_a_photo</i>
              </button>
            </div>
          </div>
          <input id="mydata" type="hidden" name="mydata" value=""/>
        </form>
      </div>
    </section>
    <footer class="page-footer teal">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <h5 class="white-text">Sobre nosotros</h5>
          <p class="grey-text text-lighten-4">Somos estudiantes de último semestre de ingeniería de sistemas de la universidad Industrial de Santander, actualmente estamos desarrollando nuestro proyecto orientado en métodos de autenticación biométrica.</p>


        </div>
        <div class="col l3 s12">
          <h5 class="white-text">Desarrollado con</h5>
          <ul>
            <li><a class="white-text" href="https://aws.amazon.com/es/rekognition/">Amazon Rekognition</a></li>
            <li><a class="white-text" href="http://materializecss.com/">Materializecss</a></li>
            <li><a class="white-text" href="https://limonte.github.io/sweetalert2/">SweetAlert2</a></li>
          </ul>
        </div>
        <div class="col l3 s12">
          <h5 class="white-text">Repositorios</h5>
          <ul>
            <li><a class="github-button" href="https://github.com/davidjurado/ReconocimientoFacial" data-size="large" aria-label="Star davidjurado/ReconocimientoFacial on GitHub">ReconocimientoFacial</a></li>
            <li><a class="github-button" href="https://github.com/julian1303/ReconocimientoVocal" data-size="large" aria-label="Star julian1303/ReconocimientoVocal on GitHub">ReconocimientoVocal</a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
      &copy;2017 Universidad Industrial de Santander
      </div>
    </div>
  </footer>
  </body>
</html>
<script type="text/javascript">
  function validarEmail( email ) {
    expr = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if ( !expr.test(email) )
    {
      swal({
        title: 'Error!',
        text: 'Debe ingresar un correo electronico valido',
        type: 'error',
        confirmButtonText: 'Ok'
      })
      return false;
    }
    else
    {
      return true;
    }
  }
</script>
<script type="text/javascript">
  function validateForm()
  {
    var a=document.forms["Form"]["nombre_img"].value;
    if (a==null || a=="")
    {
      swal({
        title: 'Error!',
        text: 'Debe ingresar un correo electronico',
        type: 'error',
        confirmButtonText: 'Ok'
      })
      return false;
    }
    else
    {
      return true;
    }
  }
</script>
<script language="JavaScript">
  function take_snapshot1() {
    if(validateForm() && validarEmail(document.forms["Form"]["nombre_img"].value)){
      document.getElementById('carga').style.display = 'block';
      swal({
        title: 'Cargando',
        text: 'Tu imagen se esta cargando',
        onOpen: function () {
          swal.showLoading()
        }
      }).then(function () {},)
      Webcam.snap( function(data_uri) {
        var raw_image_data = data_uri.replace(/^data\:image\/\w+\;base64\,/, '');
        document.getElementById('mydata').value = raw_image_data;
        document.getElementById('myform').submit();
      } );
    }
  }
</script>