  <!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Reconocimiento Facial</title>

  <!-- CSS  -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>



<script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.9.1/sweetalert2.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.9.1/sweetalert2.min.css">

<!-- Include a polyfill for ES6 Promises (optional) for IE11 and Android browser -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/core-js/2.4.1/core.js"></script>


	<style type="text/css">
		#results { float:right; margin:20px; padding:20px; border:1px solid;}
	</style>
</head>
<body>
  <nav class="navbar-fixed blue lighten-5" role="navigation">
    <div class="nav-wrapper container ">



      <a id="logo-container" href="." class="brand-logo">Captura</a>
      <ul class="right hide-on-med-and-down">
        <li><a href="#">Reconocimiento</a></li>
      </ul>

      <ul id="nav-mobile" class="side-nav">
        <li><a href="#">Navbar Link</a></li>
      </ul>
     
    </div>
  </nav>

  <div id="carga" class="progress" style="display:none">
      <div  class="indeterminate"></div>
  </div>

 <div class="row">
      <div class="col s4 offset-s1">
  
	<div id="my_camera" class="hoverable"></div>
	
	<!-- First, include the Webcam.js JavaScript Library -->
	<script type="text/javascript" src="webcam.js"></script>
	
	<!-- Configure a few settings and attach camera -->
	<script language="JavaScript">
		Webcam.set({
			width: 600,
			height: 460,
			image_format: 'jpeg',
			jpeg_quality: 100
		});
		Webcam.attach( '#my_camera' );
	</script>
	
	<!-- A button for taking snaps -->
	
	<script type="text/javascript">
		 $(document).ready(function(){
    $('.materialboxed').materialbox();
  });

	</script>
	
	
	<!-- Code to handle taking the snapshot and displaying it locally -->
	<script language="JavaScript">
		$(document).ready(function() {
    $('select').material_select();
  });
	</script>
	
<script type="text/javascript">
	function validarEmail( email ) {
    expr = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if ( !expr.test(email) )
        {
            
            swal({
  title: 'Error!',
  text: 'Debe ingresar un correo electronico valido',
  type: 'error',
  confirmButtonText: 'Ok'
})
            return false;
        }else{

        	return true;

        }
    }

</script>


	<script type="text/javascript">
    function validateForm()
    {
        var a=document.forms["Form"]["nombre_img"].value;
        if (a==null || a=="")
        {
            
            swal({
  title: 'Error!',
  text: 'Debe ingresar un correo electronico',
  type: 'error',
  confirmButtonText: 'Ok'
})
            return false;
        }else{

        	return true;

        }
    }


</script>
	<!-- Code to handle taking the snapshot and displaying it locally -->
	<script language="JavaScript">
		function take_snapshot1() {
			if(validateForm()!=false && validarEmail(document.forms["Form"]["nombre_img"].value)!=false){
				
        document.getElementById('carga').style.display = 'block';

			swal({
  title: 'Cargando',
  text: 'Tu imagen se esta cargando',
  onOpen: function () {
    swal.showLoading()
  }
}).then(
  function () {},
  // handling the promise rejection

)
			// take snapshot and get image data
			Webcam.snap( function(data_uri) {
		var raw_image_data = data_uri.replace(/^data\:image\/\w+\;base64\,/, '');
		
		document.getElementById('mydata').value = raw_image_data;
		document.getElementById('myform').submit();
	} );
		}

	}

	</script>
      </div>


      <div class="col s1 ">
      	 </div>


      <div class="col s4 z-depth-4">

		<form id="myform" name="Form" method="post" action="saveawsimage.php">

   		<div class="input-field">
            <input name="nombre_img" id="email" type="email" required onkeydown="if (event.keyCode == 13) return false" />
            <label for="email">Email</label>
          

  </div> 

          <button class="btn waves-effect waves-light" type="button"  onClick="take_snapshot1()">Subir imagen
    <i class="material-icons right">send</i>
  </button>


		 <br>
		<input id="mydata" type="hidden" name="mydata" value=""/>
		<br>
		 
	</form>






      </div>


      <div class="col s2 ">
      	 </div>
	</div>
	


  <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/init.js"></script>

</body>
</html>
